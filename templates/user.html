{% extends 'layout.html' %} {% block head %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/home.css') }}"
/>
<title>Dashboard</title>
{% endblock %} {% block navbar %}
<nav class="navbar bg-[var(--kuy-merah)] absolute w-full">
  <div class="container-fluid">
    <span class="font-semibold text-white">Kuy Roti Bakar</span>
  </div>
</nav>
{% endblock %} {% block body %}
<div class="flex w-full justify-between">
  <div class="pt-12 px-3 w-2/12 h-svh bg-white">
    <ul class="flex flex-col h-full justify-between font-medium">
      <div>
        <li class="p-1"><a href="/home/pesanan">Pesanan</a></li>
        <li class="p-1"><a href="/home/user">User</a></li>
      </div>
      <li class="p-1 text-[var(--kuy-merah)]">
        <a href="/logout">Logout</a>
      </li>
    </ul>
  </div>
  <div class="px-10 pt-14 w-10/12">
    <table class="table table-striped table-hover text-sm">
      <thead>
        <tr class="align-middle text-center">
          <th scope="col">No</th>
          <th scope="col">Nama</th>
          <th scope="col">No Telepon</th>
          <th scope="col">Status</th>
        </tr>
      </thead>
      <tbody>
        {% for usr in users %}
        <tr class="align-middle text-center">
          <td scope="row">{{ loop.index }}</td>
          <td>{{ usr.nama }}</td>
          <td>{{ usr.no_telepon }}</td>
          <td class="w-40">
            <select class="form-select" name="status" id="status" onchange="updateStatus({{ usr.no_telepon }}, '{{ usr.status }}')">
              <option value="Admin" {{ "selected" if usr.status == "Admin" else "" }}>Admin</option>
              <option value="Pengguna" {{ "selected" if usr.status == "Pengguna" else "" }}>Pengguna</option>
            </select>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %} {% block js %}
<script>
  function updateStatus(no, status) {
    fetch(`/updateStatus/${no}/${status}/usr`, {
      method: "POST",
    })
      .then((res) => res.json())
      .then((data) => {
        if (data.status == "success") {
          window.location.reload();
        }
      });
  }
</script>
{% endblock %}
